<?xml-stylesheet type="text/xsl" href="change_notes.xslt"?>
<SqlBuildManagerChangeNotes>
  <Version Major="11" Minor="3" Revision="1">
    <updated>Changes tp the deployment templates and PowerShell files to be more friendly with Azure DevOps release pipelines </updated>
    <fixed>sbm batch run regression introduced with new query option</fixed>
  </Version>
  <Version Major="11" Minor="3" Revision="0">
    <note>**The old style command line (leveraging the /Action=verb flag etc.) will be deprecated soon!**</note>
    <added>New querying across databases from command line for threaded and batch [sbm batch query] and [sbm threaded query]. Brings the exsting UI feature (Action-> Configure Multi server/Database run-> Reports -> Adhoc Query Execution) to command line  </added>
    <updated>Running a threaded update is now performed via [sbm threaded run] (vs just [sbm threaded]}, now that there is also a query option for threaded runs</updated>
  </Version>
  <Version Major="11" Minor="2" Revision="0">
    <added>The Batch processors now work on Linux worker nodes!</added>
    <updated>New batch command option to support Linux: --os [Windows,Linux]. Note also that the --batchpoolname option now has important relevance for Batch accounts that have both Linux and Windows pools</updated>
    <updated>The Azure setup scripts (see /doc/setup_azure_environment) now also include setting up a Linux pool and the creation of settings files and application package zips for both environments</updated>
  </Version>
  <Version Major="11" Minor="1" Revision="0">
    <note>Now built against .NET Standard 2.1 and .NET Core 3.1</note>
    <added>New feature to allow Azure EventHub logging for Azure Batch and Threaded model execution</added>
    <updated>Refactored unit tests to separate those that are dependent on a local build environment and SQLExpress install and those that are not</updated>
    <added>Shortened command line executable name `sbm.exe` leveraging the [System.CommmandLine](https://github.com/dotnet/command-line-api) command pattern and validation (`sbm [command] [options]`).
      The old executable (`SqlBuildManager.Console.exe`) with the prior pattern of `/Action=verb` is still supported is still available</added>
    <note>The CLI and core UI components of the app have been thoroughly tested. Some ancillary UI pieces have not. If you find an issue, please log it in GitHub</note>
  </Version>
  <Version Major="11" Minor="0" Revision="0">
    <note>MAJOR CHANGE -- removed the legacy Azure Cloud Service deployment model. Please update to use the Azure Batch model instead!</note>
    <added>New feature to allow Azure EventHub logging for Azure Batch and Threaded model execution</added>
    <updated>Refactored unit tests to separate those that are dependent on a local build environment and SQLExpress install and those that are not</updated>
    <added>YML files for Azure DevOps builds (and changes to ensure they build successfully)</added>
  </Version>
  <Version Major="10" Minor="4" Revision="4">
    <added>Added command line argument `/DefaultScriptTimeout` (integer) to allow custom settings for the timeout of scripts when created from a DACPAC. Default is 500 seconds</added>
    <updated>Refactored the `/TimeoutRetryCount` (integer) setting so it will be included in the `/SettingsFile`. This setting will retry build failures `X` times if the build fails because of any timeout error that reults in a build rollback</updated>
  </Version>
  <Version Major="10" Minor="4" Revision="3">
    <added>New utility `/Action=SaveSettings` and `/SettingsFile` argument for simple reuse of settings.</added>
  </Version>
  <Version Major="10" Minor="4" Revision="2">
    <added>Added Batch pool handling `/Action=BatchPreStage` so that Pools can be created in advance of needing the compute. Avoids the waiting "cold start" of a batch job</added>
    <added>Added Batch pool handling `/Action=BatchCleanup` so that Pools can be deleted separately from a build run (useful if you need to re-run jobs)</added>
    <updated>Changed default action of `/DeleteBatchPool` flag to `false` so that pool VMs are not immediately deleted after a Batch job. More useful now with the BatchPreStage and BatchCleanUp actions</updated>
  </Version>
  <Version Major="10" Minor="4" Revision="1">
    <updated>Updated Azure Batch to better handle pools, jobs and log file storage as well as job naming</updated>
    <updated>Refactored command line handling to clarify components</updated>
    <fixed>Cleaned up unit tests</fixed>
  </Version>
  <Version Major="10" Minor="4" Revision="0">
    <added>Functionality to leverage Azure Batch as an execution engine</added>
    <updated>Swapped out SharpZipLib to remove Zip Slip vulnerability </updated>
   </Version>
  <Version Major="10" Minor="3" Revision="0">
    <added>New authentication types for Azure: Azure AD Password and Azure AD Integrated</added>
    <note>Install now requires .NET Version 4.6.1 or higher (https://www.microsoft.com/en-us/download/details.aspx?id=49981)</note>
    <note>Also required is the Microsoft Active Directory Authentication Library for Microsoft SQL Server (https://www.microsoft.com/en-us/download/details.aspx?id=48742)</note>
  </Version>
   <Version Major="10" Minor="2" Revision="12">
    <added>Added command line to create an SBM package from a Platinum Dacpac and target database. New action /Action=ScriptExtract and /OutputSbm="&lt;filename&gt;"</added>
    <added>Now masking passwords on log messages</added>
     <note>Consolidating cloud storage locations</note>
     <note>Removing obsolete projects from solution</note>
  </Version>
   <Version Major="10" Minor="2" Revision="11">
    <updated>Changed the default script timeout for a dacpac generated script from 20 seconds to 500 seconds</updated>
  </Version>
  <Version Major="10" Minor="2" Revision="10">
    <fixed>For a remote execution build console service check now only looks at the endpoints that were tasked with work during the session.</fixed>
  </Version>
  <Version Major="10" Minor="2" Revision="9">
    <fixed>Corrected issue of creating dacpac change scripts from incorrect source</fixed>
  </Version>
  <Version Major="10" Minor="2" Revision="8">
    <fixed>Corrected issue with retrieving client list from SQL statement</fixed>
  </Version>
  <Version Major="10" Minor="2" Revision="7">
    <fixed>Fixed parsing of error logs from the remote servers</fixed>
  </Version>
  <Version Major="10" Minor="2" Revision="6">
    <fixed>Fixed installer to include the SQLPackage.exe in all instances</fixed>
    <updated>Removed restriction for the remote execution command option</updated>
  </Version>
  <Version Major="10" Minor="2" Revision="5">
    <added>Can now execute ad hoc queries using SQL Authentication. Querying will use the same credentials (AD or SQL) used when opening SQL Build Manager</added>
  </Version>
  <Version Major="10" Minor="2" Revision="4">
    <added>Changed dacpac scripting, removed custom scripting settings. These was preventing the drops of column defaults that then resulted in runtme build errors</added>
    <added>Stripping out login and user scripts</added>
  </Version>
  <Version Major="10" Minor="2" Revision="2">
    <added>New argument /BuildRevision that will be used as the value to insert into a Versions table 'VersionNumber' column</added>
    <added>New argument /RemoteDbErrorList=&lt;remote name=&gt;|all. Returns the list of databases that has execution errors in the last run. Use "all" to get list from all remote servers </added>
    <added>New argument /RemoteErrorDetail=&lt;server:db&gt;|&lt;instance&gt;|all.  Retrieves the error detail for each instance in error. Is "server:db" is provided, full log detail is returned</added>
    <added>"Last Status" to values returned with /AzureRemoteStatus=true</added>
  </Version>
  <Version Major="10" Minor="2" Revision="1">
    <added>Ability to use a SQL file as the source for a multi-database configuration source. The query must return 2 columns: 1)server name 2) database name</added>
    <added>Ability to specify a /PlatinumDbSource and /PlatinumServerSource as sources to generate the Platinum dacpac at runtime, vs using a pre-composed dacpac file</added>
    <updated>Reworked command line to use a single "/Action" argument that designates the basic functionality of the runtime instance</updated>
  </Version>
  <Version Major="10" Minor="1" Revision="1">
    <added>Added console argument /AzureRemoteStatus=true to list Azure remote execution machines and their readiness status</added>
    <added>Added console argument /ForceCustomDacPac=true to force teh creation of a custom dacpac and build script for each target database. USE WITH CAUTION this will exponentially increase the deployment time  and processing needs. Use only as a last scenario to ensure full database synchronicity</added>
    <fixed>Various remote/ threaded bug fixes</fixed>
  </Version>
  <Version Major="10" Minor="1" Revision="0">
    <added>Ability to use a "platinum" Data-tier application file (dacpac) to synchronize database schemas</added>
  </Version>
  <Version Major="10" Minor="0" Revision="0">
    <added>New ability to compare package deploys between two databases</added>
    <added>Ability to synchronize package deploys between a "golden copy" and a target</added>
    <added>New Azure cloud service deployment for remote execution engines!</added>
    <updated>Installation for the Service is now a self-installing command-line for SqlBuildManager.Services.Host.exe</updated>
    <updated>Installation for the SBM tool is through ClickOnce at www.sqlbuildmanager.com or an InstallShield installer</updated>
    <note>See the command-line reference for appropriate flags for data synchronization</note>
  </Version>
  <Version Major="9" Minor="2" Revision="2">
    <!-- July 16, 2014 -->
    <added>Command line argument /TestConnectivity=true when used in conjunction with /Remote=true will test the connectivity to the remote agents and all of the target databases</added>
    <added>New command line help (/? or /help) message</added>
    <updated>Remote execution validation between server names and execution agents is no longer case sensitive</updated>
  </Version>
  <Version Major="9" Minor="2" Revision="1">
    <!-- April 30, 2014 -->
    <added>New policy check status that warns you that code should be reviewed before release</added>
    <added>command line abilty to check script policies. Usage: SqlBuildManager.Console.exe /PolicyCheck "&lt;Source Package Path and Name&gt;" </added>
    <added>command line ability to create a default backout package. Usage: `SqlBuildManager.Console.exe /CreateBackout "&lt;Source Package Path and Name&gt;" /server="&lt;Backout source server&gt;" /database="&lt;Backout source database&gt;`"</added>
    <fixed>Script policy icons were getting set to &quot;Policy checks not run&quot; after a committed build</fixed>
    <fixed>Database login error for accounts that do not have code review database permissions</fixed>
    <updated>Added additional quick status update for the remote service to hopefully resolve issue on slower servers</updated>
    <updated>Increased delay of first check between console and remote agents from 500ms to 1 second to accommodate slower agent servers</updated>
  </Version>
  <Version Major="9" Minor="1" Revision="0">
    <!-- October 25, 2013 -->
    <fixed>Issue when creating trigger DROP scripts in backout packages</fixed>
    <fixed>Empty Zip file getting created when archiving script logs</fixed>
    <fixed>Corrected issue with Code Review retrieval that could cause application errors </fixed>
  </Version>
  <Version Major="9" Minor="0" Revision="0">
    <!-- February 5, 2013 -->
    <note>**New install requires .NET Framework 4.0** If you do not have this version installed (but you really should), please contact Mike to assist in making your current tool version forward compatible.</note>
    <added>Ability to track and manage code reviews of the SQL scripts</added>
    <added>Prohibited the use of the Ad Hoc query execution to perform INSERT, UPDATE or DELETE queries. A build package should be used instead to ensure proper logging and tracking</added>
    <added>Now logs an individual script start and end time in the SqlBuild_Logging table</added>
    <added>Refined WITH (NOLOCK) policy to now require the name of the table in the exception tag. This will allow for per table NOLOCK exceptions</added>
    <fixed>Updated WITH (NOLOCK) check to capture more edge cases</fixed>
    <fixed>Updated WITH (NOLOCK) check to better handle keywords when they appear on comments</fixed>
    <fixed>Issue with opening scripts for SBM files that are under source control</fixed>
    <fixed>Issue with source control when running an object script update</fixed>
    <fixed>Object script update issue that was not capturing the "current override settings"</fixed>
    <updated>Policy icons update in the background as each script is checked via multi-threaded execution</updated>
    <added>New command-line option to calculate the hash of an SBM or SBX file:       /gethash &quot;&lt;packageName&gt;&quot;</added>
  </Version>
  <Version Major="8" Minor="8" Revision="2">
    <!-- October 25, 2012 -->
    <added>Enhanced TFS source control to automatically add new files to source. NOTE: you still need to check-in manually.</added>
    <updated>Updated TFS source control to checkout only files as needed instead of checking out all of the scripts in an SBX</updated>
    <updated>Policy icon updated to include warnings as well as alerts</updated>
    <updated>Changed background color for "read-only" files to make it less obnoxious</updated>
    <fixed>Case sensitivity issue when matching remote execution servers and target database servers</fixed>
  </Version>
  <Version Major="8" Minor="8" Revision="1">
    <!-- August 17, 2012-->
    <updated>Updated the TFS source control integration to play nicer with the Visual Studio status refresh</updated>

  </Version>
  <Version Major="8" Minor="8" Revision="0.1">
    <!-- July 10, 2012-->
    <added>Integration with Source Control! New notification area indicator if project and files are under source control.</added>
    <note> *Will Checkout and Add files only*   You will still need to checkin/commit your changes manually</note>
    <updated>Compiled against Version 11 of Server Management Objects (SMO) for compatibility with SQL 2012</updated>
    <updated>Improved threading when adding scripted files to ensure no dialog windows are "lost"</updated>
    <added>Will now accept WITH (READPAST) as valid query optimization. This should only be used in distinct use cases!</added>
    <updated>Updated service installer to accept username and password parameters to allow for unattended service install</updated>
  </Version>
  <Version Major="8" Minor="7" Revision="3">
    <!-- June 20,2012 -->
    <added>Made it easier to combine SBM files via drag and drop into script list</added>
    <added>Export of script violations to CSV file from Tools menu</added>
    <fixed>Bulk Add confirmation window was opening hidden behind the main form</fixed>
  </Version>
  <Version Major="8" Minor="7" Revision="2">
    <!-- April 4, 2012 -->
    <note>Auditing change! No longer uses an AuditTransactionMaster when creating audit tables and triggers. All system data is now captured directly in the child audit table.</note>
    <updated>Changed how Primary Keys are scripted for tables. They are now separated from the CREATE TABLE script to allow for easier editing and updating of the settings.</updated>
    <fixed>Ensured that triggers do not get scripted with the parent table object. They should be scripted out separately.</fixed>
    <fixed>Duplicated table entries when the same table name is found in different schemas</fixed>
    <fixed>Not all indexes were getting scripted</fixed>
    <added>Added "EnableVisualStyles" for application to render properly in Windows 7</added>
  </Version>
  <Version Major="8" Minor="7" Revision="1">
    <fixed>Removed redundant policy checking when adding files in bulk</fixed>
    <added>Automatic creation of a MultiDb .cfg file of failed databases when running from the console. Creates the file in the same directory as the executable.</added>
    <added>String include context menu shortcut for index options</added>
  </Version>
  <Version Major="8" Minor="7" Revision="0">
    <!--September 27, 2011-->
    <note>New Feature! Additional script list icon column to identify policy check status</note>
    <added>Automatic policy checking on load of a build package - including icon updating</added>
    <added>New "Run Policy Checks" link on script form so you can check policy adherence without trying to save the file</added>
    <added>New script policy "syntax pair" type. Allows you to make sure script snippets are always paired (or never paired if that's what you want)</added>
    <fixed>Deserialization error when MultiDb file also includes additional query column data</fixed>
  </Version>
  <Version Major="8" Minor="6" Revision="13">
    <!--September 2, 2011-->
    <fixed>Backout package creation was incorrectly missing pre-existing triggers</fixed>
  </Version>
  <Version Major="8" Minor="6" Revision="12">
    <!--September 1, 2011-->
    <fixed>Enhanced the Constraint Name policy check to provide more accurate matching</fixed>
    <fixed>Removed added tabbing in scripted object to eliminate "shift" of object with multiple scripting</fixed>
    <updated>Altered creation of backout package so that manual scripts with a build order >= 1000 are not marked as "run once"</updated>
    <updated>Backout package creation has new option to have DROP scripts created for "Not Found" stored procedures, functions, triggers and views</updated>
    <added>Ability to copy to clipboard the list of scripts that can not be automatically generated for a backout package</added>
  </Version>
  <Version Major="8" Minor="6" Revision="11">
    <!--August 3, 2011-->
    <fixed>Updated scripting of table objects to ensure that the object schema is included all of the object references</fixed>
    <!--<added>Build validation reporting based on hash or file name values available via "Actions-> Configure Multiple Server/Database Run: Reports" </added>    -->
    <updated>Updated trigger scripts to be the same whether created new via the "Tools --> User Data History and Audit Scripting" or pulled from a database via the "Scripting --> Add Object Create Scripts --> Triggers" menu options</updated>
    <added>Synchronized zooming size between left and right sides in script comparison screens</added>
  </Version>
  <Version Major="8" Minor="6" Revision="10">
    <!--May 13, 2011-->
    <fixed>Error when scripting triggers that included an "IF EXISTS" statement in its script body</fixed>
    <fixed>Intermittent SMO database connection error</fixed>
    <added>Ability to set custom highlight colors in script comparison screens</added>
  </Version>
  <Version Major="8" Minor="6" Revision="9">
    <!--May 5, 2011-->
    <added>Timeout Retry Count feature added to remote agent execution</added>
    <added>Can now view the change history of a database object (stored procedures, views, etc) over time as executed by the Sql Build Manager tool.</added>
    <note>The history feature currently accessible from the main form "Scripting -> Add Object Create Scripts -> (select object type)" in the pop-up window, select the object, right-click and choose "View Object's change history.."</note>
    <note>Also available from the script list context menu "View object change history as run by Sql Build Manager" when you have selected a scriptable database object (stored proc, trigger, view, etc)</note>
    <fixed>Trigger scripting error when scripting via "Scripting -> Add Object Create Scripts -> Triggers". Was always producing the "UPDATE" trigger.</fixed>
  </Version>
  <Version Major="8" Minor="6" Revision="8">
    <!--March 30, 2011-->
    <added>New features for creating rollback packages: options for removal of new object scripts and auto-marking manually created scripts as "run once"</added>
    <added>New command line argument /TimeoutRetryCount to allow for multiple execution tries if the SQL Server error message received is "Timeout expired" </added>
    <added>Ability to control minimum script timeouts by file type and AD group membership</added>
    <added>Execution timer added to ad hoc query</added>
    <updated>Re-build feature now allows selection of database vs. scanning entire server on page load</updated>
    <updated>User auditing triggers will produce a file per each trigger type vs. a single files with 3 triggers</updated>
  </Version>
  <Version Major="8" Minor="6" Revision="7">
    <added>Made script timeout for default script configurable</added>
    <added>Status icons based on server modified date now linked to system scripted views, triggers and tables (i.e. files with .VIW, .TRG, .TAB extensions) as well as stored procedures and functions (.PRC and .UDF)</added>
    <added>Ability to compare previously run versions of a script to each other (vs. just comparing to the existing current script). Available via the "View Run History Against Current Server" script context menu item. </added>
    <added>Shows script count at bottom of main window</added>
    <fixed>When retrieving the detailed database log from a remote service agent, the log for the specified run date is returned instead of just the newest file.</fixed>
    <added>New command line remote execution validation that will fail the request if any database servers are in the package but don't have a matching remote execution server</added>
    <fixed>command line builder now strips of trailing backslash (\) from root logging path to avoid incorrect arguments parsing</fixed>
    <fixed>Corrected SQL Server SMO scripting error - it was leaving off the schema designation on table defaults for the IF NOT EXISTS check.</fixed>
  </Version>
  <Version Major="8" Minor="6" Revision="6">
    <note>This update only includes changes related to remote execution (a DBA thing). It is not strictly necessary for anyone else.</note>
    <added>Ability to retrieve all error logs off a remote server in a single zip package via the remote execution UI</added>
    <fixed>Logging error when running command-line remote execution</fixed>
  </Version>
  <Version Major="8" Minor="6" Revision="5">
    <fixed>Script tag was not getting inferred when using the Action -> Add New File menu option</fixed>
    <fixed>Package hash was not changing when scripts were reordered. It will now be different because the execution order can effect the final state of the database and as such the hash should be different</fixed>
  </Version>
  <Version Major="8" Minor="6" Revision="4">
    <note>**ATTENTION! Due to a change in the parsing algorithm for scripts, hash values may differ between this version and prior versions of the tool! UPDATE AS SOON AS POSSIBLE.**</note>
    <updated>Changed the ad hoc query working directory from the user's temp folder to a hidden subfolder of the destination file. This is to avoid issues with lack of storage.</updated>
    <added>Ability to set script timeout for ad hoc queries.</added>
    <updated>Modified the batching of scripts to ignore "GO" delimiter in a comment block. This may effect the hash value of some scripts but 99% of the ones I have tested are unchanged. For the 1%, they may get a "changed" icon when in fact they were not changed.</updated>
    <updated>Changed highlight color in "diff" view to be more obvious on all monitors</updated>
    <added>Additional database logging: build package hash value, user id of requestor from a remote execution, and the version number of the Sql Build Manager used to execute the run</added>
  </Version>
  <Version Major="8" Minor="6" Revision="3.1">
    <added>Ability to package all SBX files in a directory structure into their corresponding SBM packages via command line</added>
    <fixed>Reinstated the "View Log File" menu option accidentally removed in prior version</fixed>
  </Version>
  <Version Major="8" Minor="6" Revision="3">
    <fixed>Script file was being deleted from directory when removed from SBM file. (This is the expected behavior for an SBX file deletion, not SBM)</fixed>
    <fixed>App used to crash if there was an error running a multi-database query that caused no output file to be created</fixed>
    <updated>Consolidated the "About" and "Check for Updates" menu items into a single view</updated>
    <fixed>No longer forces you to change the script tag when selecting multiple scripts and selecting "Edit/View Script Build Detail"</fixed>
    <added>Now script tag value can be inferred from the file name or from within a SQL bulk comment section. If a matching pattern (P #### or CR ####) is found it will be used as the script tag.</added>
    <fixed>Error was encountered when updating an object script</fixed>
    <added>Can now script triggers directly from a source database via the Scripting --> Add Object Create Scripts --> Triggers menu option</added>
    <added>Enforces that Triggers scripted via the tool never have transactions stripped out</added>
  </Version>
  <Version Major="8" Minor="6" Revision="2">
    <note>New Feature! Added the ability to easily create a "backout package" using an unchanged environment as your source via the "Scripting --> Create Backout Package" menu option</note>
    <fixed>Corrected an issue with policy validation when encountering non-standard SQL syntax</fixed>
    <updated>Changed formatting of log file to enable syntax highlighting</updated>
    <added>Syntax highlighting on log file viewer</added>
    <added>Cut/Copy/Paste context menu to script and log file viewer</added>
  </Version>
  <Version Major="8" Minor="6" Revision="1">
    <added>Ability to configure generic "syntax checks" for scripts and add them as policy checks</added>
    <added>Policy check to disallow "EXECUTE AS" directives</added>
    <added>Policy check to disallow "WITH RECOMPILE" directives</added>
    <added>Ability to change the logging level for the current session via the Help -> Set Logging Level menu option</added>
    <added>Added ability to control feature access by AD group membership.</added>
    <added>Can now control default script entries on an enterprise level based on AD group membership</added>
    <fixed>Corrected crash when default script registry contained no items</fixed>
  </Version>
  <Version Major="8" Minor="6" Revision="0">
    <updated>Ability to pull back extremely large amounts of data via the ad hoc query function</updated>
    <updated>Cut/Copy/Paste context menu on "Add Script" and "Configure Via Query" forms</updated>
    <added>Can view the application log via the "Help --> View Application Log File" menu item.</added>
  </Version>
  <Version Major="8" Minor="5" Revision="10">
    <added>New script policy check on ALTER VIEW. Adds a reminder to check for dropped indexes. Reminder can be suppressed with a [No Indexes] tag</added>
    <updated>Tool now looks for scripts that require a build description and prompts for one if found</updated>
    <fixed>Exception was being thrown on startup when the Registered Servers tree list had a folder with no entries</fixed>
    <updated>If a script timeout is set below the minimum allowed value, it will automatically be updated to the minimum value on attempted save</updated>
    <updated>Removed release notes from user manual into separate HTML file</updated>
  </Version>
  <Version Major="8" Minor="5" Revision="9">
    <updated>Added exception for "Select Star" policy to accept for views that are prefixed with "vw_" in their name. (Configurable) </updated>
    <added>Creation of the specified external logging directory if it doesn't pre-exist.</added>
    <updated>Changed default script timeout to minimum default script timeout (vs. fixed value) to ensure nothing smaller is added</updated>
    <updated>Added database count to the server distribution list form</updated>
    <fixed>Object scripting error for some objects that had 2 "CREATE" scripts vs. a "CREATE" and an "ALTER"</fixed>
    <fixed>Corrected Null reference error when loading an SBX control file from a newly opened instance of the tool.</fixed>
  </Version>
  <Version Major="8" Minor="5" Revision="8">
    <added>Build history tracking on remote build service client</added>
    <added>Ability to view build history and retrieve log files for historical Build Service requests</added>
    <fixed>Finder control to stop skipping to next find as you type</fixed>
    <fixed>ad hoc query would sometimes run "last" query</fixed>
    <added>Ability to include additional summary data items in ad hoc query</added>
  </Version>
  <Version Major="8" Minor="5" Revision="7">
    <updated>Updated "find" feature on script view window to search starting at cursor location vs. always at the top</updated>
    <updated>Increased maximum package size for WCF service call to 5Mb</updated>
    <fixed>The object scripting window for Views was duplicating objects when there were 2 objects with the same name in different schemas</fixed>
    <added>Ability to pull back the SqlBuildManager.Service.log file from the remote agent to the client</added>
    <added>New TestDatabaseConnectivity WCF method to pre-check the ability of the remote agent to connect to its target databases before actually submitting a build.</added>
    <added>New "Using" extension method for WCF client calls to properly handle the Close() method when the channel is in a faulted state (http://nimtug.org/blogs/damien-mcgivern/archive/2010/05/13/2320.aspx)</added>
    <added>New BuildRequestFrom property on BuildSettings object to record on the Remote Execution server the user that submitted the build request</added>
  </Version>
  <Version Major="8" Minor="5" Revision="6">
    <added>Enterprise level enforcement of script tag requirement</added>
    <added>"Registered Server" capability on connection form</added>
    <added>Ability to have and load master registered server lists available at a shared enterprise level</added>
  </Version>
  <Version Major="8" Minor="5" Revision="5">
    <added>Command-line builder for remote execution</added>
    <added>Ability to generate the remote execution server list from the list of override target servers</added>
    <updated>Product manual including new features</updated>
  </Version>
  <Version Major="8" Minor="5" Revision="4">
    <fixed>Directory parsing on remote service side when the server name is an IP address</fixed>
    <added>Made the minimum default script timeout an enterprise level setting</added>
  </Version>
  <Version Major="8" Minor="5" Revision="3">
    <updated>Rebuild using the SQL Management Objects (SMO) v10 DLL's</updated>
    <updated>"Qualified Names" policy check failures now include line number of offending script</updated>
    <added>Command line options for remote server execution </added>
    <added>Ability to use System environment variables in the "remote logging path" for remote server execution.</added>
    <added>Ability to save a single pre-configured remote execution server package (.resp) file that includes remote server list, SBM contents, target databases, et. al.</added>
    <updated>Modified connection strings used to be "Pooling=false;" to solve connection and timeout issues.</updated>
  </Version>
  <Version Major="8" Minor="5" Revision="2">
    <added>Copy feature in Database Size Summary and Database Analysis forms to copy data and header information to clipboard for easy analysis in the spreadsheet of your choice.</added>
    <fixed>Stored procedure scripting error when using the "Script Object ALTER and CREATE" option. Was leaving out the ALTER script when the CREATE script had the CREATE text in lower case.</fixed>
  </Version>
  <Version Major="8" Minor="5" Revision="1">
    <added>Hash Signature calculation Tool functionality and menu item to use as a package validation signature</added>
    <updated>Manual to include new section "Validating a Build Package"</updated>
    <fixed>File copy problem with SBX files when the script was already in the same folder as the SBX file itself</fixed>
    <fixed>Issue with adding "tag" values to new scripts then getting lost.</fixed>
  </Version>
  <Version Major="8" Minor="4" Revision="0">
    <added>Script policy to check for "SELECT *"</added>
    <added>Refinements to the Qualified Names script policy including ignoring statements in a comment block</added>
    <added>Stored Procedure Parameter script policy</added>
    <added>Beta version of Remote Execution Service and client</added>
    <updated>Added new features to product manual</updated>
  </Version>
  <Version Major="8" Minor="3" Revision="9">
    <updated>User data auditing user interface improved</updated>
    <updated>User data auditing ON UPDATE trigger changed to use 'deleted' vs 'inserted' data for audit record</updated>
    <added>Ability to directly import auditing scripts into currently open Sql Build Project</added>
    <fixed>Refresh error when multi-database UI opening an existing query package</fixed>
  </Version>
  <Version Major="8" Minor="3" Revision="8">
    <updated>Code table populate scripts to include WITH (NOLOCK)</updated>
    <updated>Schema policy check to ignore the trigger tables "inserted" and "deleted"</updated>
    <updated>WITH (NOLOCK) policy check to ignore the trigger tables "inserted" and "deleted"</updated>
    <updated>References to SQL 2005 sys.objects view from SQL 2000 sysobjects</updated>
    <fixed>Qualified names policy to handle an UPDATE statement that does not have a following WHERE</fixed>
  </Version>
  <Version Major="8" Minor="3" Revision="7">
    <updated>Changed the Multiple database configration page from using pre-loaded tabs to creating pages on demand (this is to get around a window handle error that was found when loading a very large configuration)</updated>
    <updated>Auditing trigger scripts to rename column from RowsEffected to RowsAffected</updated>
    <fixed>Script status icon wasn't refreshing after an "update object create script" command</fixed>
  </Version>
  <Version Major="8" Minor="3" Revision="6">
    <updated>File copy choices for default scripts when there is a pre-existing script or a read-only one already in place.</updated>
    <updated>Physical file deletion warning in SBX files when that file is shared by another co-resident SBX file.</updated>
    <added>Help Icon in Database Summary form.</added>
    <updated>Error handling when creating a new project file and default scripts.</updated>
    <added>Updated Regex to ignore all SQL 2005 system views in NOLOCK policy and optimization.</added>
    <added>Additional SqlBuildManager.Enterprise unit tests to increase code coverage %</added>
  </Version>
  <Version Major="8" Minor="3" Revision="5">
    <fixed>When scripting objects as DROP / CREATE, removed the IF NOT EXISTS for the create (we already know it's not there because it was dropped!)</fixed>
    <added>Enterprise/Team setting for watching and alerting on table changes</added>
    <updated>NOLOCK policy to ignore SELECT FROM on functions</updated>
    <updated>NOLOCK and Qualified names policies to ignore keywords that are encapsulated in comments.</updated>
    <updated>Added 'sys.foreign_keys' to the ignore list for NOLOCK policy</updated>
    <updated>Policy violation form UI update.</updated>
    <updated>Manual and help file links</updated>
  </Version>
  <Version Major="8" Minor="3" Revision="4">
    <added>Adding help manual</added>
    <added>Links within the application to the help manual file</added>
    <updated>Utility scripts to be fully qualified</updated>
    <updated>Added exclusion for cursors from the Qualified Names policy</updated>
    <added>Checking for valid default and or target override database settings prior to execution of package.</added>
    <updated>Qualified Names Policy to not require schema qualifiers on temp table or table variables</updated>
    <updated>Modified NOLOCK optimization and NOLOCK policy checker to ignore temp tables (#tablename) and table variables (tablename)</updated>
    <updated>Modified icon for multi-database query configuration files (.multiDbQ)</updated>
    <updated>Moved policy interface into separate project for future growth of interfaces.</updated>
  </Version>
  <Version Major="8" Minor="3" Revision="3">
    <updated>Updated Qualified Names Policy to check for qualifiers on INSERT and UPDATE scripts.</updated>
    <updated>Script Optimization and NO LOCK policy check to ignore UPDATE and DELETE statements</updated>
    <fixed>Updated Stored Procedure scripting to hit SMO objects only once when scripting.</fixed>
    <fixed>With SBX files, handle adding default scripts when they reside in the same directory</fixed>
  </Version>
  <Version Major="8" Minor="3" Revision="1">
    <added>Ability to drag and drop scripts between different Sql Build Manager instances</added>
  </Version>
  <Version Major="8" Minor="3" Revision="0">
    <added>Policy checking during the saving of a new file, scripting a file from the database and refreshing scripts from the database</added>
    <added>Policy check to ensure that table names are fully qualified with a schema prefix</added>
    <added>Policy check for a consistent comment header on procedures and functions.</added>
    <added>Standard header text insertable from the script context menu when editing a script</added>
    <added>Policy check to ensure that constraint names include the name of the referenced table</added>
    <added>Policy check that procedures and functions do not have a GRANT EXECUTE to the 'public' role.</added>
    <updated>Added a [NOLOCK Exception: &lt;reason&gt;] override tag to the WITH (NOLOCK) policy check. </updated>
    <fixed>Default version script includes RAISEERROR if versions table is not present.</fixed>
  </Version>
  <Version Major="8" Minor="2" Revision="0">
    <added>Ability to perform Ad Hoc query across multiple servers/databases with results in CSV, HTML or XML format</added>
    <added>Ability to load/save multi-database configuration via query </added>
    <added>Ability to perform multi database run from query via command line</added>
  </Version>
  <Version Major="8" Minor="1" Revision="13">
    <fixed>Updated object comparison to use the first sequenced database as the "baseline". Was looking for "0", but didn't enforce its presence.</fixed>
  </Version>
  <Version Major="8" Minor="1" Revision="12">
    <added>Ability to generate report showing script run status across multiple databases and servers</added>
    <added>Ability to generate report to compare database objects across multiple databases and servers</added>
    <added>Ability to perform additional analysis of database object report after initial run (doesn't need to hit database again)</added>
    <added>Ability to select alternate Logging database from the UI for build run (formerly only available via command line)</added>
    <added>Goto line number in edit script window</added>
    <added>Current Line and Character number labels in edit script window</added>
    <fixed>Added plain JOIN statement to the Script Optimization algorithm</fixed>
  </Version>
  <Version Major="8" Minor="1" Revision="10">
    <added>Policy enforcement functionality with 3 built in policies: WITH (NOLOCK) directive, scripts wrapped in IF EXISTS for re-runability and GRANT execute for all routines.</added>
    <added>Ability to change source database and server for object script updates from "Scripting" menu.</added>
    <added>Ability to select alternate Logging database from the UI for build run (formerly only available via command line)</added>
    <added>Threaded execution support for non-transactional RunScriptClear</added>
    <updated>Utility scripts updated for optimization</updated>
    <updated>Various compiler warning clean-ups</updated>
    <fixed>Changed to catch it when unable to connect to a SQL server and notify the user to try another server.</fixed>
    <fixed>Error loading of an SBX file when the build history file (SqlSyncBuildHistory.xml) is not found in the directory.</fixed>
    <fixed>Error saving/loading a multiDb configuration if there is a duplicate entry error. </fixed>
  </Version>
  <Version Major="8" Minor="1" Revision="8">
    <fixed>Error loading SBX control file when there were missing files</fixed>
    <fixed>Error loading SBX control file when the SqlSyncBuildHistory.xml file was writeable</fixed>
    <fixed>Error loading command line creator form when the SBM file name or multi-db file is empty</fixed>
  </Version>

  <Version Major="8" Minor="1" Revision="7">
    <note>Please manually uninstall your prior version before installing this new one **</note>
    <fixed>Serial multi-db runs were always executed as Trial. Now will run as commit as directed.</fixed>
    <added>Added the ability to use dynamic script token replacements #BuildDescription# and #BuildFileName#</added>
    <added>Ability to specify build description for multi-db treaded execution via /description command argument</added>
  </Version>
  <Version Major="8" Minor="1" Revision="6">
    <updated>Enhanced the Command Line builder form to have Auto-Complete feature</updated>
    <added>Ability to execute a constructed command line directly from the form</added>
    <added>Ability to set an alternate logging database for threaded builds</added>
    <added>Ability to set a UserName and Password (as alternative to Windows Authentication) for threaded BuildScriptEvent</added>
  </Version>
  <Version Major="8" Minor="1" Revision="5">
    <fixed>Updated the command line constructor for our best friends the DBA's... have fun.</fixed>
    <added>"Filtering" for object list in add object list window</added>
    <fixed>File name of loaded .multiDb displays in the status bar</fixed>
    <added>New column in Logging table to include target database (will be used in later update)</added>
    <added>New form to construct a command line string</added>
    <fixed>When removing a script file from an SBX file, will now physically remove the file from disk as well.</fixed>
    <fixed>Checks for a read-only "SqlSyncBuildHistory.xml" when working with SBX files since these are needed as writeable as well. </fixed>
  </Version>
  <Version Major="8" Minor="1" Revision="4">
    <added>Indicator and control for read-only files when working with the SBX loose file configuration.</added>
    <added>Ability to generate Stored Procedures, Views and Functions with IF EXISTS CREATE and ALTER pair via setting.</added>
    <added>Ability to generate Stored Procedures, Views and Functions with permissions script via setting.</added>
    <updated>Updated auto-scripting settings to accept zip and header settings from UI.</updated>
    <fixed>Making name of rebuilt file always have a .sbm extension since it only supports packages and not loose configurations.</fixed>
    <added>Improved formatting of scripts created as ALTER And CREATE</added>
    <added>Ability to use the delete key to remove scripts from the List</added>
    <added>Warning when scripts weren't successfully removed from a script list (still working on root cause of intermittent problem)</added>
    <updated>Default key for removing scripts is now "No" instead of "Yes" to help eliminate unwanted removals.</updated>
  </Version>
  <Version Major="8" Minor="1" Revision="3">
    <fixed>Error in script list background color updating under some scenarios</fixed>
    <fixed>Error blocking scripts when they were pre-run on the server, but not the specific database</fixed>
    <added>New script helper to automatically add "WITH (NOLOCK)" directives on all "FROM" type statements: FROM, INNER JOIN, OUTER JOIN, RIGHT JOIN, LEFT JOIN. This can be used to improve select performance when a lock is not required on the target data.</added>
    <added>Alerting when SBM or SBX file is read-only with option to make writable or not load.</added>
    <added>Count of target databases hit to end of multi-threaded run log file</added>
    <fixed>Display of UpdateDate column name in table scripting tool-tip. It was instead being set as the UpdateID column type</fixed>
    <fixed>When an empty build package run was attempted, crashed the app. This is now caught and an error message is displayed.</fixed>
    <added>Application icon for the SqlBuildManager.Console.exe tool</added>
    <added>Additional utility scripts for granting execute and revoke permissions</added>
    <fixed>Unhandled exception when using server quick change and no build project was loaded.</fixed>
    <added>Ability to add more than one update location for version checking. Can add delimited list for ProgramVersionCheckURL and ProgramUpdateFolderURL appsettings. They match up by array index, so make sure they're in order. </added>
  </Version>
  <Version Major="8" Minor="1" Revision="0">
    <note>Major Update!   Now allows for managing scripts in either a single file package (the original .sbm file) or via a "loose" file structure. This new mechanism consists of a build control XML file (.sbx) that contains the script run metadata for the scripts that co-resident in the same file system directory. When you're ready to put them all together, a "package" feature is there to put all the files into a new build .sbm package.
    </note>
    <added>Ability to create update/insert scripts from Data Extract file</added>
    <fixed>Added schema name to the table in database analysis page</fixed>
    <fixed>Sorting of multi-db run. Was sorting alphabetically even for numeric sequence numbers!</fixed>
    <fixed>Database list for scripting option wasn't refreshing when server changed via server quick change drop down</fixed>
    <updated> Added error notification if object scripting was not successful</updated>
    <updated> updated some menu icons</updated>
  </Version>
  <Version Major="8" Minor="0" Revision="5">
    <added>New threaded execution setting /trial to all you to perform a threaded run that will always get rolled back.</added>
    <added>New threaded execution setting /ScriptSrcDir to perform execution using a directory containing your scripts vs. using a pre-created SBM file. Keep in mind, you lose quite a bit of functionality, but now you can do it.</added>
    <added>New threaded execution setting /LogAsText to create log files in simple text. By default, they are created in HTML to allow for easy hyperlinking between the detailed run logs</added>
    <updated>Updated some menu icons</updated>
    <fixed>Corrected sorting of "Bulk Add"</fixed>
  </Version>

  <Version Major="8" Minor="0" Revision="4">
    <!--(September 5,2008)-->
    <added>NEW FEATURE for the console application (now in version 2.0.0). Added the ability to use Sql Build Manager engine to process builds across multiple database instances in a threaded manner. Instead of the log and messages getting saved in the .SBM file, they are saved in a directory structure. This will allow you to update multiple same-schema databases quickly and efficiently.</added>
    <fixed>Coloring of scripts marked as "run once" and also locked against running again. They were incorrectly getting displayed as white.</fixed>
    <updated>Updated menu icons</updated>
  </Version>
  <Version Major="8" Minor="0" Revision="3">
    <!-- (July 17,2008)-->
    <added>Ability to copy out build history on a per-run basis to an XML file. This is done via a new context menu option on the "Review Past Builds" form (Logging | Show Build History from the main screen). Select the build(s) from the top master list then right-click and select "Save Build Details for Selected Rows".</added>
    <added>New executable SqlBuildManager.Console.exe to simplify command-line running. This allows you to automate Sql Build Manager and retrieve exit codes as well as the console out and console error values.</added>
    <added>New command line option to run Stored Procedure testing in an unattended, non-interactive mode.</added>
    <added>New command line option to run a multi-database/server configuration in an unattended, non-interactive mode.</added>
    <updated>Cleaned up command line options to a consistent key-value pair argument list.</updated>
    <fixed>Issue when creating a new Stored Procedure test project file. You weren't able to select a menu item when there were no stored procedures already in the tree view.</fixed>
  </Version>
  <Version Major="8" Minor="0" Revision="2">
    <!--(July 10,2008)-->
    <added>Enhancements to the Multi Database/Server run configuration form. Now alerts user when a loaded configuration doesn't match the databases found on the the target servers.</added>
    <added>Enhancements to the Multi Database/Server run configuration form. Added a tab view inside the server pane to make it easier to navigate the databases in the configuration. Added some coloring to make the area separation clearer.</added>
    <added>New links to the project web site at http://www.SqlBuildManager.com so the user can easily access the help manual.</added>
  </Version>
  <Version Major="8" Minor="0" Revision="1">
    <!--(June 27,2008)-->
    <note>Major updates!</note>
    <updated> 1.Upgrading from using the deprecated SQLDMO for scripting to the "new" SMO scripting</updated>
    <updated> 2. Full compatibility with SQL schema names for all objects. This includes scripted objects as well as all of the script helpers and wrappers.</updated>
    <updated> 3. New multi-database/server configuration. This allows you to run against multiple target databases and across multiple servers in a single run and transaction.</updated>
  </Version>
  <Version Major="7" Minor="6" Revision="9">
    <added>Automatically detects="" and strips our SQL "USE" statements (this should be handled by the tool)</added>
    <added>Project modifications to allow clean checkout/build/test process.</added>
    <added>`&lt;Ctrl&gt;` key modifier to open project file temp directory when clicking on project file name in main window.</added>
    <added>  More robust schema validation to ensure build file load.</added>
  </Version>
  <Version Major="7" Minor="6" Revision="8">
    <added>Updated content checking</added>
  </Version>
  <Version Major="7" Minor="6" Revision="7">
    <!-- August 17, 2007 -->
    <added>Check for change date on SP's and Functions to look for manual database changes.</added>
    <added>New status icon to alert user of a manual server side database change.</added>
    <added>Help menu for status icon meanings and background coloring + tool tips</added>
    <added>Script tag to the SBM comparison form for easier cross-check</added>
  </Version>
  <Version Major="7" Minor="6" Revision="5">
    <!-- August 2, 2007 -->
    <added>Search feature in script comparison forms</added>
    <added>"Find next diff" feature in file comparisons</added>
  </Version>
  <Version Major="7" Minor="6" Revision="4">
    <!-- July 27, 2007 -->
    <added>Toggle button to slide build script list to display date added and date modified for scripts.</added>
    <fixed>Override database list was case-sensitive when adding names causing doubles.</fixed>
    <fixed>Script search "OK" and "Cancel" buttons respond to Enter and Esc keys respectively</fixed>
    <fixed>"Found" scripts from search weren't always getting highlighted</fixed>
    <fixed> When there is a build file read error for an unattended build, the tool sends out an error code and exits</fixed>
  </Version>
  <Version Major="7" Minor="6" Revision="2">
    <!-- June 1, 2007 -->
    <fixed>Database name showing with "*" when modifying multiple scripts</fixed>
    <fixed>Target database override list not refreshing when a database was removed.</fixed>
  </Version>
  <Version Major="7" Minor="6" Revision="1">
    <!-- May 25, 2007 -->
    <fixed>Corrected roll-back error when database connection unavailable causing partially committed builds.</fixed>
    <fixed>Changed docking for resize of build manager group box.</fixed>
    <fixed>Error in refresh of status icons when Override target change is selected.</fixed>
    <updated>Updated DefaultScriptRegistry.xml to remove the IFOOrder default script entry.</updated>
  </Version>
  <Version Major="7" Minor="6" Revision="0">
    <!--  May 21, 2007 -->
    <added>Override target database settings</added>
    <added>Ability to maintain manual database entries</added>
  </Version>
  <Version Major="7" Minor="5" Revision="5">
    <!--  March 13, 2007 -->
    <added>Added "find" feature to SQL script windows</added>
    <added>Updated build review window to display results in full window </added>
    <fixed>Corrected thread contention error in unattended builds.</fixed>
  </Version>
  <Version Major="7" Minor="5" Revision="3">
    <!-- February 13, 2007 -->
    <added>Time display for each script duration.</added>
    <added>Setting flag to create build log file or not (default to not) - keeps build file smaller</added>
  </Version>
  <Version Major="7" Minor="5" Revision="2">
    <!-- February 9, 2007 -->
    <added>Completed stored procedure testing framework</added>
    <added>Compare between current script and script previously run on server</added>
    <added>Highlighted SQL view of scripts run on a server</added>
    <added>New index to SQLBuild_logging table to speed up list refresh</added>
  </Version>
  <Version Major="7" Minor="5" Revision="1">
    <!-- January 23, 2007 -->
    <added>Check to ensure that Stored Procedures (.PRC) and Functions (.UDF) never strip transactions.</added>
    <added>Ability to import Stored Procedure test configurations.</added>
  </Version>
  <Version Major="7" Minor="5" Revision="0">
    <!-- January 23, 2007 -->
    <added>Sorting of build script list by status image.</added>
    <added>Stored procedure testing framework</added>
  </Version>
  <Version Major="7" Minor="4" Revision="11">
    <!--  January 8, 2007 -->
    <added>Ability to cancel a build.</added>
    <added>Status timers for build duration and script duration.</added>
    <added>Added progress bar for Builds</added>
    <added>No script list refresh for failed builds (no need)</added>
    <added>Ability to change multiple script tags at once. </added>
    <added>New utility scripts to wrap Stats and PK adds to make them re-runnable.</added>
    <added>Added CreateId and CreateDate for Code Table auditing</added>
  </Version>
  <Version Major="7" Minor="4" Revision="6">
    <!-- December 1, 2006 -->
    <fixed>Tag value not being saved with bulk add (ex. direct object scripting)</fixed>
    <added>Tool tip alert when an autoscripting candidate (&lt;F12&gt;) value is highlighted in script window</added>
  </Version>
  <Version Major="7" Minor="4" Revision="5">
    <!-- November 28,2006 -->
    <fixed>Corrected object scripting error</fixed>
    <fixed>Added error message when trying to open newer build files with old version.</fixed>
    <added>Automatic Checking for new versions</added>
    <added>Manual checking for new versions via Help menu</added>
  </Version>

</SqlBuildManagerChangeNotes>